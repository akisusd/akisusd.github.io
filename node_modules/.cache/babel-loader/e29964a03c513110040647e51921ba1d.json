{"ast":null,"code":"export var fetchUserSuccess = function fetchUserSuccess(user) {\n  return {\n    type: 'FETCH_USER_SUCCESS',\n    user: user\n  };\n};\nexport var fetchUserError = function fetchUserError() {\n  return {\n    type: 'FETCH_USER_ERROR'\n  };\n};\nexport var fetchUser = function fetchUser(accessToken) {\n  return function (dispatch) {\n    var request = new Request('https://api.spotify.com/v1/me', {\n      headers: new Headers({\n        'Authorization': 'Bearer ' + accessToken\n      })\n    });\n    fetch(request).then(function (res) {\n      // send user back to homepage if no token\n      if (res.statusText === \"Unauthorized\") {\n        window.location.href = './';\n      }\n\n      return res.json();\n    }).then(function (res) {\n      dispatch(fetchUserSuccess(res));\n    }).catch(function (err) {\n      dispatch(fetchUserError(err));\n    });\n  };\n};","map":{"version":3,"sources":["/home/akos/Work/react/src/actions/userActions.js"],"names":["fetchUserSuccess","user","type","fetchUserError","fetchUser","accessToken","dispatch","request","Request","headers","Headers","fetch","then","res","statusText","window","location","href","json","catch","err"],"mappings":"AAAA,OAAO,IAAMA,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,IAAD,EAAU;AACxC,SAAO;AACLC,IAAAA,IAAI,EAAE,oBADD;AAELD,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,IAAME,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAClC,SAAO;AACLD,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,IAAME,SAAS,GAAG,SAAZA,SAAY,CAACC,WAAD,EAAiB;AAExC,SAAO,UAAAC,QAAQ,EAAI;AACjB,QAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY,+BAAZ,EAA6C;AAC3DC,MAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnB,yBAAiB,YAAYL;AADV,OAAZ;AADkD,KAA7C,CAAhB;AAMAM,IAAAA,KAAK,CAACJ,OAAD,CAAL,CAAeK,IAAf,CAAoB,UAAAC,GAAG,EAAI;AACzB;AACA,UAAGA,GAAG,CAACC,UAAJ,KAAmB,cAAtB,EAAsC;AACpCC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,IAAvB;AACD;;AACD,aAAOJ,GAAG,CAACK,IAAJ,EAAP;AACD,KAND,EAMGN,IANH,CAMQ,UAAAC,GAAG,EAAI;AACbP,MAAAA,QAAQ,CAACN,gBAAgB,CAACa,GAAD,CAAjB,CAAR;AACD,KARD,EAQGM,KARH,CAQS,UAAAC,GAAG,EAAI;AACdd,MAAAA,QAAQ,CAACH,cAAc,CAACiB,GAAD,CAAf,CAAR;AACD,KAVD;AAWD,GAlBD;AAmBD,CArBM","sourcesContent":["export const fetchUserSuccess = (user) => {\n  return {\n    type: 'FETCH_USER_SUCCESS',\n    user\n  };\n};\n\nexport const fetchUserError = () => {\n  return {\n    type: 'FETCH_USER_ERROR'\n  };\n};\n\nexport const fetchUser = (accessToken) => {\n\n  return dispatch => {\n    const request = new Request('https://api.spotify.com/v1/me', {\n      headers: new Headers({\n        'Authorization': 'Bearer ' + accessToken\n      })\n    });\n\n    fetch(request).then(res => {\n      // send user back to homepage if no token\n      if(res.statusText === \"Unauthorized\") {\n        window.location.href = './';\n      }\n      return res.json();\n    }).then(res => {\n      dispatch(fetchUserSuccess(res));\n    }).catch(err => {\n      dispatch(fetchUserError(err));\n    });\n  };\n};"]},"metadata":{},"sourceType":"module"}